{% extends 'base.html' %}
{% load static %}

{% block title %}Astro Share Blog!!{% endblock %}

{% block content %}
<div class="content">

  <h4>Latest posts</h4>

    <div class="pagination">
      <span class="step-links">
          {% if page_obj.has_previous %}
              <a href="?page=1">&laquo; first</a>
              <a href="?page={{ page_obj.previous_page_number }}">previous</a>
          {% endif %}

          

          <span class="current">
              Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
          </span>

          {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}">next</a>
              <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
          {% endif %}
      </span>
  </div>
<br>


    <ul>
      {% for post in posts %}
      <li class="post {% if forloop.counter0|divisibleby:2 %} bg-l-gray {% else %} bg-d-gray {% endif %}">
        <h5 class="container">
          <a href="{% url 'article-detail' post.pk %}">{{ post.title }}</a>
        </h5>
        <small>
        <p> Posted: {{ post.post_date }} Category: <a href="{% url 'category' post.category|slugify %}">{{ post.category }}</a>
          By: <span class="last-name">{{ post.author.last_name }}</span>, <span class="first-name">{{ post.author.first_name }}</p>
        </small>
          {{ post.body|slice:":200" }}
          {% if user.is_authenticated %}
          <p>
            <small>
                <a href="{% url 'update-post' post.pk %}">Edit</a>
                <a href="{% url 'delete-post' post.pk %}">DELETE POST</a>
            </small>
          </p>
          {% endif %}
      </li>
      <hr>
      {% endfor %}
    </ul>

    <br>
    <a href="{% url 'homepage' %}" class="alert alert-secondary">Back to homepage</a>
    <br>
    <br>
</div>
{% endblock %}
